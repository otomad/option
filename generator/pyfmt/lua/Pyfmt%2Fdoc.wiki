{{ptl|define=small|tl=<nowiki><span style="font-size:60%;color:#333333">{{{1|}}}</span></nowiki>}}
{{Lua|Module:Pyfmt}}
{{ombox
| type = content
| style = border: 1px solid #ddd; background: #fbfbfb;
| image = [[File:Ambox warning yellow.svg|40px|alt=Warning|link=]]
| text = '''本模板使用 Lua 语言编写，如果您不太熟悉本语言，请慎重使用本模板。'''<br />否则建议请根据下面的步骤，一步一步操作。}}
'''拼音格式化（Pinyin Formatting）'''。本模板使用 Lua 语言。以方便用户快速输入带声调的汉语拼音。

例如，本模板可以使编辑者只需输入在键盘上十分容易键入的 chuang4，即可得到 {{pyfmt|chuang4}}。

==用法==
{{tlc|pyfmt|ASCII汉语拼音|类型}}

其中，'''“ASCII汉语拼音”'''为必选参数，'''“类型”'''为可选参数。

本模板全都是编号参数。

;ASCII汉语拼音
:此处填写只需使用 ASCII 字符就能轻易输入的（即标准键盘有的字符）能够被人类轻易理解，且也不必考虑计算机编码不支持的问题，但不是很美观的汉语拼音。前面是不带声调的基本拉丁字母，最后一个字符表示声调，用数字表示。具体规则请参考下面的[[#规则|规则]]。本参数必须填写，否则可能会产生错误。
;<span id="类型"></span>类型
:本参数可选填写，缺省表示为 '''0'''。以 chuang4 为例，具体填写参数请参考下表。
{| class="wikitable" style="width: 100%;"
|-
! 参数{{NoteTag|name=note4|1=小字部分为兼容填写参数，其中英文不必区分大小写。}} !! 类型 !! 效果
|-
| '''0'''<br>{{ptl|use=small|缺省填写或任意填写其它内容}} || 全部小写字母 || {{pyfmt|chuang4|0}}
|-
| '''1'''<br>{{ptl|use=small|大写<br>大<br>upr<br>upper<br>capital}} || 全部大写字母 || {{pyfmt|chuang4|1}}
|-
| '''2'''<br>{{ptl|use=small|小型大写字母<br>small capital}} || 全部小型大写字母 || {{pyfmt|chuang4|2}}
|-
| '''3'''<br>{{ptl|use=small|首字母大写}} || 首字母大写，其它全部小写字母|| {{pyfmt|chuang4|3}}
|-
| '''4''' || 首字母大写，其它全部小型大写字母{{NoteTag|name=note5|1=主要用于填写姓氏拼音。}} || {{pyfmt|chuang4|4}}
|}

==注意==
* 拼音可以输入大写，也可以输入小写，也可以混合输入。但是内部会全部转换成小写处理。最后根据“类型”参数，全部转换成大写或保留小写。
* 请不要尝试输入错误的拼音，否则可能会产生意外的结果。
* 本模板一次只允许输入一个拼音，如希望转换一句话的拼音，请[[#参见|参见]]下面的其它模板。
* 所有的声调采用 Unicode 的组合用附加符号实现，绝大多数系统均可正常显示字符，极少数系统由于缺少字体，显示出来的字符非常诡异。
* 若希望输出大写拼音，少数罕见拼音带声调的字母如“ê”“ü”等的大写“Ê”“Ü”会因为字符过于高大，导致声调没能显示在本行或者被本行直接截断。
* 小型大写字母由于十分罕见，Unicode 官方几乎不给它们基于带附标的字符，因此声调会错位。本问题无解，但也可以用于使用不带调的小型大写字母拼音。
* 小型大写字母 Q，绝大多数设备无法正常显示；Unicode 并没有小型大写字母 X，因此用小写字母代替。
* 本模板允许在一定的范围内输入不合法的拼音，比如：duang1、gi1、giao4 等。但也是有局限的。
* 当不合法拼音包含多个相同的应该带声调的字母时，只给第一个该字母注音。如：daa4 会被注音为 {{pyfmt|daa4}}。

==<span id="规则"></span>规则==
* 先输入不带声调的拼音的英文字母，大小写均可，最后输入的一个数字表示声调。
:{{color|red|（请不要尝试在除拼音结尾处之外的其它任意位置输入数字。）}}
* 用 '''v''' 表示 '''ü'''。此外，新规护照所采用的用 '''yu''' 表示 '''ü''' 亦可使用，只不过仅用于《新华字典》中已有的读音，人为造的发音在这里并不适用，但依然可以用 '''v''' 表示。
* '''j、q、x、y''' 后接的 ü 应手动打成 '''u'''，不能依靠本模板自动转换。人为输入的 jv 会被转换成 jü 这种错误形式。
* 若希望输入拼音字母 '''ê'''，可以使用 '''eh''' 或者 '''e^'''。
* 这里，汉语拼音对字母（不一定是韵母）的注音顺序依次是：'''a'''、'''o'''、'''e'''、ê、'''i'''、'''u'''、'''ü'''、n、m。其中'''加粗'''的为汉语拼音方案中标准的注音顺序，不加粗的是本模板所采用的顺序。'''唯有一个例外的是'''，拼音 '''iu''' 会被注音在 '''u''' 上，而不是上述规则中的 i。
* 拼音若不包含上述可标声调的字母，不注音。
* 关于末尾的数字所表示的声调，请参考下表。
{| class="wikitable" style="text-align:center;"
|-
! 末尾数字 !! 1 !! 2 !! 3 !! 4 !! 5 !! 0
|-
!scope="row"| 含义 
| 阴平 || 阳平 || 上声 || 去声 || 入声 || 轻声
|-
!scope="row"| 符号 
| ˉ || ˊ || ˇ || ˋ || ˙ || {{NoteTag|name=note1|1=（无符号）}}
|}
==示例==
{| class="wikitable" style="width: 100%;"
|-
! 代码 !! 效果
|-
| {{tlc|pyfmt|chuang4}} || {{pyfmt|chuang4}}
|-
| {{tlc|pyfmt|zhi3}} || {{pyfmt|zhi3}}
|-
| {{tlc|pyfmt|jiu1}} || {{pyfmt|jiu1}}
|-
| {{tlc|pyfmt|wi1}} {{NoteTag|name=note2|1=测试不合法拼音。}} || {{pyfmt|wi1}}
|-
| {{tlc|pyfmt|xu5}} || {{pyfmt|xu5}}
|-
| {{tlc|pyfmt|lve4}} || {{pyfmt|lve4}}
|-
| {{tlc|pyfmt|lyu3}} || {{pyfmt|lyu3}}
|-
| {{tlc|pyfmt|seh1}} || {{pyfmt|seh1}}
|-
| {{tlc|pyfmt|se^2}} || {{pyfmt|se^2}}
|-
| {{tlc|pyfmt|hng1}} || {{pyfmt|hng1}}
|-
| {{tlc|pyfmt|nu4|1}} || {{pyfmt|nu4|1}}
|-
| {{tlc|pyfmt|qi1|大写}} || {{pyfmt|qi1|大写}}
|-
| {{tlc|pyfmt|AO4|0}} {{NoteTag|name=note3|1=大写拼音恢复。<br>尽管输入的为大写，但是始终以“类型”标签所表示的为准。}} || {{pyfmt|AO4|0}}
|-
| {{tlc|pyfmt|vv1}} {{NoteTag|name=note6|1=首字母的 v 依然保持为 v，作为声母，主要用于表示方言。而之后的所有 v 才会被转义为 ü。<br>不过似乎 {{pyfmt|vv}} 这个音并不容易读出来。}} || {{pyfmt|vv1}}
|-
| {{tlc|pyfmt|de|2}} {{NoteTag|name=note7|1=拼音的末尾不输入表示声调的数字，效果等同于轻声。}} || {{pyfmt|de|2}}
|}

==注释==
{{NoteFoot}}

==<span id="参见"></span>参见==
*{{tl|ruby}}{{————}}注音模板
**下面是重定向：
**{{tl|注音}}
**{{tl|拼音}}
*{{tl|pystc}}{{————}}整句话的拼音格式化
