function single(a,b=0){a=a.toLowerCase().trim();for(var c=a.length,d=0,e=0;e<c;e++)"v"==a[e]&&d++;2<=d&&"v"==a[0]&&(a=a.replace("v","#")),a=a.replaces("v,lyu,nyu,eh","\xFC,l\xFC,n\xFC,\xEA"),a=a.replace("#","v"),c=a.length;var f=a[c-1];("0">f||"9"<f)&&(f="0"),a=a.replace(f,""),"6"<=f&&"9">=f&&(f="1");for(var g,h=["","\u0304","\u0301","\u030C","\u0300","\u0307"],j=h[f],k=["a","o","e","\xEA","i","u","\xFC","n","m"],m=-1,e=0;-1==m&&e<k.length;e++)g=k[e],m=a.search(g);-1==m&&(g=""),-1!=a.search("iu")&&(g="u"),-1!=a.search("i\xFC")&&(g="\xFC");var n=""==g?a:a.replace(g,g+j);return output=prepareForOutputType(n,b)}var capitalList="A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,\xCA,\xDC,\xC8",smallcapitalList="\u1D00,\u0299,\u1D04,\u1D05,\u1D07,\uA730,\u0262,\u029C,\u026A,\u1D0A,\u1D0B,\u029F,\u1D0D,\u0274,\u1D0F,\u1D18,\uA7AF,\u0280,\uA731,\u1D1B,\u1D1C,\u1D20,\u1D21,x,\u028F,\u1D22,\u1D07\u0302,\u1D1C\u0308,\u1D07\u0300";String.prototype.toLowerUpperCase=function(){var a=this.toUpperCase();return a=a.replaces(capitalList,smallcapitalList),a};var modeList=["single","bpmf","romatzyh","ghhszm"];function sentence(raw,sep="'",mode=0,type=0){raw=raw.toLowerCase().trim().replace(/e\^/g,"eh");for(var cur,arr=split(raw),result="",first=type,i=0;i<arr.length;i++){if(!isLegal(arr[i][0])){result+=(0==i?"":sep)+arr[i];continue}0<i&&arr[i-1].finds(".?!\u2026\u3002\uFF1F\uFF01\u22EF".inTwo())&&(type=first),(4==type||6==type)&&type--,cur=eval(modeList[mode]+"(\""+arr[i]+"\","+type+")");var aoe=arr[i][0];(0==mode||2==mode)&&0<i&&""==sep&&aoe.is("a,o,e,i,u")&&(cur="'"+cur),result+=(0==i?"":sep)+cur,(4==first||6==first)&&type==first-1&&(type-=3)}return result}function sentence_legacy(raw,sep="'",mode=0,type=0){for(raw=raw.toLowerCase().trim();-1!=raw.search("''");)raw=raw.replace(/\'\'/g,"'");var n,l=raw.length,first=1,legacy=0,origType=type;for(result="";""!=raw&&"'"!=raw;){if(!("0"<=raw[0]&&"9">=raw[0]||"^"==raw[0]||"a"<=raw[0]&&"z">=raw[0])){if("'"==raw[0]){raw=raw.slice(1),result+=sep;continue}("."==raw[0]||"?"==raw[0]||"!"==raw[0]||"\u2026"==raw[0]||"\u3002"==raw[0]||"\uFF1F"==raw[0]||"\uFF01"==raw[0]||"\u22EF"==raw[0])&&(type=origType),first=1,result+=raw[0],raw=raw.slice(1);continue}var flag=0;n=99999,n=raw.indexOf("'"),input=raw.slice(0,n),raw=raw.slice(n+1);var aoe=input[0];""==sep&&("a"==aoe||"o"==aoe||"e"==aoe||"\xEA"==aoe||"i"==aoe||"u"==aoe||"\xFC"==aoe)&&1!=first&&1!=mode&&(flag=1),(4==type||6==type)&&(type--,legacy=1),input=input.replace(/e\^/g,"eh"),eval(modeList[mode]+"()"),1==flag&&(output="'"+output),result+=""==raw?output:output+sep,1==legacy&&(type-=3,legacy=0),first=0}l=result.length,result[l-1]==sep&&(result=result.slice(0,-1))}var comsep="',\u2018,\u2019,`,|,-,_,/,\\, ";function split(a){for(var b=(a+"").trim(),c=[],d=0;d<b.length;d++){if(0<d&&isLegal(b[d])&&!isLegal(b[d-1]+"")&&(c.push(b.slice(0,d)),b=b.slice(d),d=0),0<d&&isLegal(b[d-1]+"")&&!isLegal(b[d])){c.push(b.slice(0,d)),b=b.slice(d),d=-1;continue}if(b[d].is("0123456789".inTwo())&&!(b[d+1]+"").is(comsep)){c.push(b.slice(0,d+1)),b=b.slice(d+1),d=-1;continue}if(b[d].is(comsep)){c.push(b.slice(0,d)),b=b.slice(d+1),d=-1;continue}}return b&&c.push(b),c.trim(),c}function printCharList(a,b){for(var d="",e=a.charCodeAt();e<=b.charCodeAt();e++)d+=String.fromCharCode(e);return d}function isLegal(a){var b=(printCharList("0","9")+printCharList("a","z")+printCharList("A","Z")).inTwo()+","+comsep;return!!a.is(b)}function bpmf(a,b=0){a=a.toLowerCase().trim().replace(/er/g,"\u3126");var c=a.length;("0">a[c-1]||"9"<a[c-1])&&(a+="0",c++),"0"==a[c-1]&&(a="\u2022"+a),"0"<=a[c-1]&&"9">=a[c-1]?"r"==a[c-2]&&(a=a.slice(0,c-2)+"%"+a.slice(c-1)):"r"==a[c-1]&&(a=a.slice(0,c-1)+"%");for(var d=0,e=0;e<c;e++)"v"==a[e]&&d++;2<=d&&"v"==a[0]&&(a=a.replace("v","#")),output=a;return output=output.replaces("zhi,chi,shi,wu,yue,yuan,ying,yin,yun,jun,qun,xun,wei,you,weng,wen,ri,zi,ci,si,yi,ue,yu,ju,qu,xu,ye,ang,eng,ing,ong,an,en,in,un,ng,gn,ao,ou,iu,ai,ei,ui,ie,-i,eh,a,o,e,i,u,v,#,%,1,2,3,4,5,6,7,8,9,0,zh,ch,sh,b,p,m,f,d,t,n,l,g,k,h,j,q,x,r,z,c,s,y,w","\u3113,\u3114,\u3115,\u3128,\u3129\u311D,\u3129\u3122,\u3127\u3125,\u3127\u3123,\u3129\u3123,\u3110\u3129\u3123,\u3111\u3129\u3123,\u3112\u3129\u3123,\u3128\u311F,\u3127\u3121,\u3128\u3125,\u3128\u3123,\u3116,\u3117,\u3118,\u3119,\u3127,\u3129\u311D,\u3129,\u3110\u3129,\u3111\u3129,\u3112\u3129,\u3127\u311D,\u3124,\u3125,\u3127\u3125,\u3128\u3125,\u3122,\u3123,\u3127\u3123,\u3128\u3123,\u312B,\u312C,\u3120,\u3121,\u3127\u3121,\u311E,\u311F,\u3128\u311F,\u3127\u311D,\u312D,\u311D,\u311A,\u311B,\u311C,\u3127,\u3128,\u3129,\u312A,\u3126,,\u02CA,\u02C7,\u02CB,\u02D9,,,,,,\u3113,\u3114,\u3115,\u3105,\u3106,\u3107,\u3108,\u3109,\u310A,\u310B,\u310C,\u310D,\u310E,\u310F,\u3110,\u3111,\u3112,\u3116,\u3117,\u3118,\u3119,\u3127,\u3128")}function romatzyh(a,b=0){a=a.toLowerCase().trim();for(var c=a.length,d=0,e=0;e<c;e++)"v"==a[e]&&d++;2<=d&&"v"==a[0]&&(a=a.replace("v","V"));var f=parseInt(a[c-1]);"0">a[c-1]||"9"<a[c-1]?(f=0,c++):a=a.slice(0,-1),5==f&&(f=0),6<=f&&9>=f&&(f=1);var g=0,h=0;("m"==a[0]||"n"==a[0]||"l"==a[0]||"r"==a[0])&&(1==f||2==f)&&(g=1),0==f&&("e"==a[c-2]&&-1==a.search("ie")&&-1==a.search("ue")&&-1==a.search("ve")?a=a.slice(0,-1):h=1,f=1,("m"==a[0]||"n"==a[0]||"l"==a[0]||"r"==a[0])&&1<a.length&&"ng"!=a&&(f=2));a=a.replaces("lyu,nyu,lve,nve,juan,quan,xuan,yuan,jun,qun,xun,yun,au,iou,ieng,ien,uei,ueng,uen,ung,iue,iuan,iun","lv,nv,lue,nue,jvan,qvan,xvan,yvan,jvn,qvn,xvn,yvn,ao,iu,ing,in,ui,ong,un,ong,ue,van,vn"),"m"==a||"n"==a||"ng"==a||"v"==a||("a"!=a[0]&&"o"!=a[0]&&"e"!=a[0]&&"i"!=a[0]&&"u"!=a[0]&&(a=a.slice(0,1).toUpperCase()+a.slice(1)),1==g&&(1==f?a=a.slice(0,1)+"H"+a.slice(1):f=1));a=a.replaces("Z,C,zhi,chi,Shi,RHi,zi,ci,Si,Ri,zh,ch,Sh,z,c,Q,X,Y,W","z,c,zh-i,ch-i,Sh-i,RH-i,z-i,c-i,S-i,R-i,J,CH,SH,TZ,TS,CH,SH,y,w");var j=[];j[0]="IANG,UANG,IONG,IANG,ING,UANG,UENG,IONG,IUAN,ANG,ENG,ING,ONG,IAI,IAU,IAN,UAI,UAN,IUAN,IAI,IAU,IOU,IAN,IN,UAI,UEI,UAN,UEN,IUE,IUN,AI,EI,AU,OU,AN,EN,IA,IO,IE,IOU,IN,UA,UO,UEI,UEN,IUE,IUN,IA,IO,IE,UA,UO,I,U,IU,A,O,\xC8,E,Y,I,U,IU,NG,N,M",j[1]="YANG,WANG,YONG,YANG,YNG,WANG,WENG,YONG,YUAN,ARNG,ERNG,YNG,ORNG,YAI,YAU,YAN,WAI,WAN,YUAN,YAI,YAU,YOU,YAN,YN,WAI,WEI,WAN,WEN,YUE,YUN,AIR,EIR,AUR,OUR,ARN,ERN,YA,YO,YE,YOU,YN,WA,WO,WEI,WEN,YUE,YUN,YA,YO,YE,WA,WO,YI,WU,YU,AR,OR,\xC8R,ER,YR,YI,WU,YU,NGR,NR,MR",j[2]="EANG,OANG,EONG,YEANG,YIING,WOANG,WOENG,YEONG,YEUAN,AANG,EENG,IING,OONG,EAI,EAU,EAN,OAI,OAN,EUAN,YEAI,YEAU,YEOU,YEAN,YIIN,WOAI,WOEI,WOAN,WOEN,YEUE,YEUN,AE,EEI,AO,OOU,AAN,EEN,EA,EO,IEE,EOU,IIN,OA,UOO,OEI,OEN,EUE,EUN,YEA,YEO,YEE,WOA,WOO,YII,WUU,YEU,AA,OO,\xC8\xC8,EE,YY,II,UU,EU,NNG,NN,MM",j[3]="IANQ,UANQ,IONQ,YANQ,YINQ,WANQ,WENQ,YONQ,YUANN,ANQ,ENQ,INQ,ONQ,IAY,IAW,IANN,UAY,UANN,IUANN,YAY,YAW,YOW,YANN,YINN,WAY,WEY,WANN,WENN,YUEH,YUNN,AY,EY,AW,OW,ANN,ENN,IAH,IOH,IEH,IOW,INN,UAH,UOH,UEY,UENN,IUEH,IUNN,YAH,YOH,YEH,WAH,WOH,YIH,WUH,YUH,AH,OH,\xC8H,EH,YH,IH,UH,IUH,NQ,NH,MH",a=a.replaces("iang,uang,iong,yang,ying,wang,weng,yong,yvan,ang,eng,ing,ong,iai,iao,ian,uai,uan,van,yai,yao,you,yan,yin,wai,wei,wan,wen,yue,yvn,ai,ei,ao,ou,an,en,ia,io,ie,iu,in,ua,uo,ui,un,ue,vn,ya,yo,ye,wa,wo,yi,wu,yu,a,o,eh,e,-i,i,u,v,ng,n,m",j[f-1]),a=a.replaces("r,HL,-","L,LL,");var k=a.toLowerCase();return output=prepareForOutputType(k,b),1==h&&(output="."+output),output}var diacriticalLetter="\u0101,\xE1,\u01CE,\xE0,\u0227,\u014D,\xF3,\u01D2,\xF2,\u022F,\u0113,\xE9,\u011B,\xE8,\u0117,\u012B,\xED,\u01D0,\xEC,\xEF,\u016B,\xFA,\u01D4,\xF9,\u01D6,\u01D8,\u01DA,\u01DC,\u0144,\u0148,\u01F9,\u1E45,\u1E3F,\u1E41,\u1EBF,\u1EC1",combiningLetter="a\u0304,a\u0301,a\u030C,a\u0300,a\u0307,o\u0304,o\u0301,o\u030C,o\u0300,o\u0307,e\u0304,e\u0301,e\u030C,e\u0300,e\u0307,i\u0304,i\u0301,i\u030C,i\u0300,i\u0308,u\u0304,u\u0301,u\u030C,u\u0300,\xFC\u0304,\xFC\u0301,\xFC\u030C,\xFC\u0300,n\u0301,n\u030C,n\u0300,n\u0307,m\u0301,m\u0307,\xEA\u0301,\xEA\u0300";function prepareForOutputType(a,b){var c=a,d=c.toLowerUpperCase();c=c.replace(/i\u0307/g,"i\u0308"),c=c.replaces(combiningLetter,diacriticalLetter);var e=c.toUpperCase();e=e.replace("\xCF","\u0130");var f=c;return 1==b&&(f=e),2==b&&(f=d),3==b&&(f=e[0]+c.substr(1)),"\u0300"<=d[1]&&"\u0370">d[1]&&(d=d[0]+d.substr(2)),5==b&&(f=e[0]+d.substr(1)),f}function ghhszm(a,b=0){a=a.toUpperCase().trim();var c=a.length,d=a[c-1];("0">d||"9"<d)&&(d="0"),a=a.replace(d,""),"5"!=d||"0"!=d,"6"<=d&&"9">=d&&(d="1"),a=a.replaces("CH,ZH,SH,IU,UI,UN,IN","c,z,s,IOU,UEI,UEN,iEN"),a=a.replaces("ANG,ENG,ONG,ING,IE,AN,AO,AI,ER,EN,OU,EI,i,PU,BU,MU,FU,WU,PI,BI,MI,CU,ZU,SU,DU,TU,cU,zU,sU,RU,NU,LU,CI,ZI,SI,DE,TE,DI,TI,cI,zI,sI,RI,NE,LE,NV,LV,JU,QU,XU,YU,NI,LI,JI,QI,XI,YI,GU,KU,HU,GE,KE,HE,A,E,O,P,B,M,F,W,C,Z,S,D,T,c,z,s,R,N,L,J,Q,X,Y,G,K,H","\u4EA2,\u7FC1,\u7FC1,I\u7FC1,\u723A,\u5B89,\u8C6A,\u54C0,\u513F,\u6069,\u616A,\u5371,I,\u64B2,\u535C,\u6728,\u592B,\u4E94,\u76AE,\u5FC5,\u7C73,\u9EA4,\u79DF,\u8607,\u90FD,\u571F,\u521D,\u6731,\u66F8,\u5165,\u5974,\u76E7,\u8FAD,\u59FF,\u7D72,\u5FB3,\u7279,\u4F4E,\u984C,\u9072,\u4E4B,\u8A69,\u65E5,\u8A25,\u52D2,\u5973,\u5442,\u5C45,\u8DA8,\u9808,\u4E8E,\u5C3C,\u96E2,\u57FA,\u5176,\u5E0C,\u8863,\u5B64,\u5938,\u4E4E,\u6208,\u79D1,\u79BE,\u963F,\u6211,\u6211,\u64B2,\u535C,\u6728,\u592B,\u4E94,\u8FAD,\u59FF,\u7D72,\u5FB3,\u7279,\u9072,\u4E4B,\u8A69,\u5165,\u8A25,\u52D2,\u5C45,\u8DA8,\u9808,\u8863,\u6208,\u79D1,\u79BE"),output=a.replaces("\u64B2,\u535C,\u6728,\u592B,\u4E94,\u76AE,\u5FC5,\u7C73,\u9EA4,\u79DF,\u8607,\u90FD,\u571F,\u521D,\u6731,\u66F8,\u5165,\u5974,\u76E7,\u8FAD,\u59FF,\u7D72,\u5FB3,\u7279,\u4F4E,\u984C,\u9072,\u4E4B,\u8A69,\u65E5,\u8A25,\u52D2,\u5973,\u5442,\u5C45,\u8DA8,\u9808,\u4E8E,\u5C3C,\u96E2,\u57FA,\u5176,\u5E0C,\u8863,\u5B64,\u5938,\u4E4E,\u6208,\u79D1,\u79BE,\u723A,\u4EA2,\u5B89,\u8C6A,\u54C0,\u963F,\u513F,\u7FC1,\u6069,\u616A,\u5371,\u6211","\uE000,\uE001,\uE002,\uE003,\uE004,\uE005,\uE006,\uE007,\uE008,\uE009,\uE00A,\uE00B,\uE00C,\uE00D,\uE00E,\uE00F,\uE010,\uE011,\uE012,\uE013,\uE014,\uE015,\uE016,\uE017,\uE018,\uE019,\uE01A,\uE01B,\uE01C,\uE01D,\uE01E,\uE01F,\uE020,\uE021,\uE022,\uE023,\uE024,\uE025,\uE026,\uE027,\uE028,\uE029,\uE02A,\uE02B,\uE02C,\uE02D,\uE02E,\uE02F,\uE030,\uE031,\uE032,\uE033,\uE034,\uE035,\uE036,\uE037,\uE038,\uE039,\uE03A,\uE03B,\uE03C,\uE03D");var e="";return"1"==d||"3"==d?e="\uE03E":("2"==d||"4"==d)&&(e="\uE03F"),"3">d?output=output.slice(0,-1)+e+output.slice(-1):output+=e,output}