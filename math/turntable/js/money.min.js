"use strict";var society=1;let resetMoney=Symbol("resetMoney");class money{constructor(type){this.type=type,this[resetMoney]()}[resetMoney](){null!==cookie.get(this.type)&&isFinite(Number(cookie.get(this.type)))||cookie.set(this.type,4e3);var amount=Number(cookie.get(this.type));amount>1e14&&cookie.set(this.type,1e14),amount<-1e14&&cookie.set(this.type,-1e14)}amount(){return this[resetMoney](),cookie.get(this.type)-0}amountName(){return money.getAmountName(this.amount())}recharge(m){m-=0;var n,o=this.amount();switch(society){case 1:case 2:if(1e13==o.getValidValue(!0)&&-9e12==m.getValidValue(!0)){n=9e12;break}o.getPrefix(!1)>=13&&9e12==Math.abs(m.getValidValue(!0))&&(m=m>0?1e13:-1e13);var oPref=o.getPrefix(!1),mPref=m.getPrefix(!1);n=(n=oPref>mPref?o:oPref<mPref?m:o+m).getValidValue(!0);break;default:n=o+m}return cookie.set(this.type,n),this.refreshMoney(),this.amount()}cost(m){return m>this.amount()?(console.warn("余额不足！"),!1):this.recharge(-m)}refreshMoney(query="#amount-num"){var el;if("string"==typeof query)el=document.querySelector(query);else if("object"==typeof query&&query instanceof HTMLElement)el=query;else{if(!("object"==typeof query&&query instanceof jQuery))return!1;el=query[0]}return null!==el&&(el.innerText=this.amountName())}static getAmountName(amount){return`${amount.getValidValue(!1)} ${amount.getPrefix(!0)}元`}static amount(type,name=!1){return window[type]["amount"+(name?"Name":"")]()}static recharge(money,type){return window[type].recharge(money)}static cost(money,type){return window[type].cost(money)}static refreshMoney(type="bill",el="#amount-num"){return window[type].refreshMoney(el)}static create(type){return window[type]=new money(type)}}!function(){function ee(x,a=1){return void 0===x?Math.E:a*Math.pow(10,x)}Math.social=function(n){switch(society){case 2:return Math.round(n);case 1:return Math.trunc(n);default:return n}},Number.prototype.getPrefix=function(name=!1){const metricPrefixName=["",,,,"万",,,,"亿",,,,"兆","∞ "];function divE(n,x){return Math.social(n/ee(x))}var l=[0,4,8,12,13],a=l[l.length-1];for(let i=1;i<l.length;i++)if(0==divE(this,l[i])){a=l[i-1];break}return name?metricPrefixName[a]:a},Number.prototype.getValidValue=function(full=!1){var pref=ee(this.getPrefix(!1)),a=Math.social(this/pref);return full?a*pref:a},String.prototype.i=function(index,character=""){return this.slice(0,index)+String(character)+this.slice(index+1)},String.prototype.hyphenToCamelCase=function(){var result="",capital=!1;for(let char of this.toLowerCase())"-_+.,:".includes(char)?capital=!0:(result+=capital?char.toUpperCase():char,capital=!1);return result},String.prototype.replaces=function(a,b,sep=",",caseInsensitive=!1){var s=this;Array.isArray(a)||(a=a.split(sep)),b&&!Array.isArray(b)&&(b=b.split(sep));for(let i=0;i<a.length;i++)s=s.replace(new RegExp(a[i],caseInsensitive?"gi":"g"),b?b[i]:"");return s}}();var cookie={set:function(name,value,days=36500){var expires=new Date;expires.setTime(expires.getTime()+24*days*60*60*1e3),document.cookie=name+"="+escape(value)+";expires="+expires.toUTCString()},get:function(name){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");return(arr=document.cookie.match(reg))?arr[2]:null},text:()=>document.cookie},urlState={data:{},clear:function(){this.data={},history.pushState("","",document.URL.split("?")[0])},reset:function(){var questionMark=location.href.indexOf("?"),state;return this.data={},-1!==questionMark&&(location.href.slice(questionMark+1).split("&").forEach(set=>{var divide=set.split("=");this.data[decodeURIComponent(divide[0])]=decodeURIComponent(divide[1])}),!0)},get:function(name){if(!this.reset())return null;var result=this.data[name];return void 0===result?null:result},set:function(name,value){return this.reset(),void 0!==value?this.data[name]=value:delete this.data[name],this.burn()},burn:function(obj){void 0!==obj&&(this.data=obj);var encodeState={};for(let key in this.data)encodeState[encodeURIComponent(key)]=encodeURIComponent(this.data[key]);var encodeURL=JSON.stringify(encodeState).replace(/\:/g,"=").replace(/\,/g,"&").replace(/\"/g,"").slice(1,-1);return history.pushState("","","?"+encodeURL),!0},obj:function(){return this.reset()?this.data:null}};urlState.reset();var rootCSS={text:{},val:{},value:{},reset:function(){for(let i=0;i<document.styleSheets.length;i++)try{for(let j=0;j<document.styleSheets[i].cssRules.length;j++)if(":root"==document.styleSheets[i].cssRules[j].selectorText)for(let k=0;k<document.styleSheets[i].cssRules[j].style.length;k++){let name=document.styleSheets[i].cssRules[j].style[k],value=document.styleSheets[i].cssRules[j].style.getPropertyValue(name).trim(),CamelCase=name.hyphenToCamelCase(),camelCase=CamelCase[0].toLowerCase()+CamelCase.slice(1);this.text[camelCase]=this.text[CamelCase]=this.text[name]=value,value=Number(value.replaces("px,rem,em,vw,vh,vmin,vmax,%,in,cm,mm,pt,pc,ex,ch,ms,s","",void 0,!0)),this.val[camelCase]=this.val[CamelCase]=this.val[name]=value}}catch(e){continue}this.value=this.val}};function Import(src,type=""){var script=document.createElement("script");script.src=src,script.type=type,document.body.appendChild(script)}rootCSS.reset(),money.create("bill"),money.refreshMoney();