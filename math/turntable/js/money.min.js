"use strict";var society=1,money;!function(){let t=Symbol("resetMoney");function e(t,e=1){return void 0===t?Math.E:e*Math.pow(10,t)}money=class money{constructor(e){this.type=e,this[t]()}[t](){null!==cookie.get(this.type)&&isFinite(Number(cookie.get(this.type)))||cookie.set(this.type,4e3);var t=Number(cookie.get(this.type));t>1e14&&cookie.set(this.type,1e14),t<-1e14&&cookie.set(this.type,-1e14)}amount(){return this[t](),cookie.get(this.type)-0}amountName(){return money.getAmountName(this.amount())}recharge(t){t-=0;var e,r=this.amount();switch(society){case 1:case 2:if(1e13==r.getValidValue(!0)&&-9e12==t.getValidValue(!0)){e=9e12;break}r.getPrefix(!1)>=13&&9e12==Math.abs(t.getValidValue(!0))&&(t=t>0?1e13:-1e13);var n=r.getPrefix(!1),o=t.getPrefix(!1);e=(e=n>o?r:n<o?t:r+t).getValidValue(!0);break;default:e=r+t}return cookie.set(this.type,e),this.refreshMoney(),this.amount()}cost(t){return t>this.amount()?(console.warn("余额不足！"),!1):this.recharge(-t)}refreshMoney(t="#amount-num"){var e;if("string"==typeof t)e=document.querySelector(t);else if("object"==typeof t&&t instanceof HTMLElement)e=t;else{if(!("object"==typeof t&&t instanceof jQuery))return!1;e=t[0]}return null!==e&&(e.innerText=this.amountName())}static getAmountName(t){return`${t.getValidValue(!1)} ${t.getPrefix(!0)}元`}static amount(t,e=!1){return window[t]["amount"+(e?"Name":"")]()}static recharge(t,e){return window[e].recharge(t)}static cost(t,e){return window[e].cost(t)}static refreshMoney(t="bill",e="#amount-num"){return window[t].refreshMoney(e)}static create(t){return window[t]=new money(t)}},Math.social=function(t){switch(society){case 2:return Math.round(t);case 1:return Math.trunc(t);default:return t}},Number.prototype.getPrefix=function(t=!1){const r=["",,,,"万",,,,"亿",,,,"兆","∞ "];function n(t,r){return Math.social(t/e(r))}var o=[0,4,8,12,13],i=o[o.length-1];for(let t=1;t<o.length;t++)if(0==n(this,o[t])){i=o[t-1];break}return t?r[i]:i},Number.prototype.getValidValue=function(t=!1){var r=e(this.getPrefix(!1)),n=Math.social(this/r);return t?n*r:n},String.prototype.i=function(t,e=""){return this.slice(0,t)+String(e)+this.slice(t+1)},String.prototype.hyphenToCamelCase=function(){var t="",e=!1;for(let r of this.toLowerCase())"-_+.,:".includes(r)?e=!0:(t+=e?r.toUpperCase():r,e=!1);return t},String.prototype.replaces=function(t,e,r=",",n=!1){var o=this;Array.isArray(t)||(t=t.split(r)),e&&!Array.isArray(e)&&(e=e.split(r));for(let r=0;r<t.length;r++)o=o.replace(new RegExp(t[r],n?"gi":"g"),e?e[r]:"");return o},document.Import=function(t,e="text/javascript"){var r=document.createElement("script");r.src=t,r.type=e,document.body.appendChild(r)}}();var cookie={set:function(t,e,r=36500){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3),document.cookie=t+"="+escape(e)+";expires="+n.toUTCString()},get:function(t){var e,r=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(r))?e[2]:null},text:()=>document.cookie},urlState={data:{},clear:function(){return this.data={},history.pushState("","",location.href.split("?")[0]),!0},reset:function(){var t=location.href.indexOf("?"),e;return this.data={},-1!==t&&(location.href.slice(t+1).split("&").forEach(t=>{var e=t.split("=");this.data[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}),!0)},get:function(t){if(!this.reset())return null;var e=this.data[t];return void 0===e?null:e},set:function(t,e){if(this.reset(),"object"==typeof arguments[0])return this.burn({...this.data,...arguments[0]});for(let t=0;t<arguments.length;t+=2){const e=arguments[t],r=arguments[t+1];this.data[e]=r,null==r&&delete this.data[e]}return this.burn()},burn:function(t){if(void 0!==t&&(this.data=t),"{}"===JSON.stringify(this.data))return this.clear();var e={};for(let t in this.data)"function"!=typeof this.data[t]&&(e[encodeURIComponent(t)]=encodeURIComponent(this.data[t]));var r=JSON.stringify(e).replace(/\:/g,"=").replace(/\,/g,"&").replace(/\"/g,"").slice(1,-1);return history.pushState("","","?"+r),!0},obj:function(){return this.reset()?this.data:null}};urlState.reset();var rootCSS={text:{},val:{},value:{},reset:function(){for(let t=0;t<document.styleSheets.length;t++)try{for(let e=0;e<document.styleSheets[t].cssRules.length;e++)if(":root"==document.styleSheets[t].cssRules[e].selectorText)for(let r=0;r<document.styleSheets[t].cssRules[e].style.length;r++){let n=document.styleSheets[t].cssRules[e].style[r],o=document.styleSheets[t].cssRules[e].style.getPropertyValue(n).trim(),i=n.hyphenToCamelCase(),s=i[0].toLowerCase()+i.slice(1);this.text[s]=this.text[i]=this.text[n]=o,o=parseFloat(o),this.val[s]=this.val[i]=this.val[n]=o}}catch(t){continue}this.value=this.val}};rootCSS.reset(),money.create("bill"),money.refreshMoney();