"use strict";var society=1;let _resetMoney=Symbol("resetMoney");class money{constructor(e){this.type=e,this[_resetMoney]()}[_resetMoney](){null!==cookie.get(this.type)&&isFinite(Number(cookie.get(this.type)))||cookie.set(this.type,4e3);var e=Number(cookie.get(this.type));e>1e14&&cookie.set(this.type,1e14),e<-1e14&&cookie.set(this.type,-1e14)}amount(){return this[_resetMoney](),cookie.get(this.type)-0}amountName(){return money.getAmountName(this.amount())}recharge(e){e-=0;var t,r=this.amount();switch(society){case 1:case 2:if(1e13==r.getValidValue(!0)&&-9e12==e.getValidValue(!0)){t=9e12;break}r.getPrefix(!1)>=13&&9e12==Math.abs(e.getValidValue(!0))&&(e=e>0?1e13:-1e13);var n=r.getPrefix(!1),o=e.getPrefix(!1);t=(t=n>o?r:n<o?e:r+e).getValidValue(!0);break;default:t=r+e}return cookie.set(this.type,t),this.refreshMoney(),this.amount()}cost(e){return e>this.amount()?(console.warn("余额不足！"),!1):this.recharge(-e)}refreshMoney(e="#amount-num"){var t;if("string"==typeof e)t=document.querySelector(e);else if("object"==typeof e&&e instanceof HTMLElement)t=e;else{if(!("object"==typeof e&&e instanceof jQuery))return!1;t=e[0]}return null!==t&&(t.innerText=this.amountName())}static getAmountName(e){return`${e.getValidValue(!1)} ${e.getPrefix(!0)}元`}static amount(e,t=!1){return window[e]["amount"+(t?"Name":"")]()}static recharge(e,t){return window[t].recharge(e)}static cost(e,t){return window[t].cost(e)}static refreshMoney(e="bill",t="#amount-num"){return window[e].refreshMoney(t)}static create(e){return window[e]=new money(e)}}!function(){function e(e,t=1){return void 0===e?Math.E:t*Math.pow(10,e)}Math.social=function(e){switch(society){case 2:return Math.round(e);case 1:return Math.trunc(e);default:return e}},Number.prototype.getPrefix=function(t=!1){const r=["",,,,"万",,,,"亿",,,,"兆","∞ "];function n(t,r){return Math.social(t/e(r))}var o=[0,4,8,12,13],i=o[o.length-1];for(let e=1;e<o.length;e++)if(0==n(this,o[e])){i=o[e-1];break}return t?r[i]:i},Number.prototype.getValidValue=function(t=!1){var r=e(this.getPrefix(!1)),n=Math.social(this/r);return t?n*r:n},String.prototype.i=function(e,t=""){return this.slice(0,e)+String(t)+this.slice(e+1)},String.prototype.hyphenToCamelCase=function(){var e="",t=!1;for(let r of this.toLowerCase())"-_+.,:".includes(r)?t=!0:(e+=t?r.toUpperCase():r,t=!1);return e},String.prototype.replaces=function(e,t,r=",",n=!1){var o=this;Array.isArray(e)||(e=e.split(r)),t&&!Array.isArray(t)&&(t=t.split(r));for(let r=0;r<e.length;r++)o=o.replace(new RegExp(e[r],n?"gi":"g"),t?t[r]:"");return o}}();var cookie={set:function(e,t,r=36500){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3),document.cookie=e+"="+escape(t)+";expires="+n.toUTCString()},get:function(e){var t,r=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(r))?t[2]:null},text:()=>document.cookie},urlState={data:{},clear:function(){this.data={},history.pushState("","",location.href.split("?")[0])},reset:function(){var e=location.href.indexOf("?"),t;return this.data={},-1!==e&&(location.href.slice(e+1).split("&").forEach(e=>{var t=e.split("=");this.data[decodeURIComponent(t[0])]=decodeURIComponent(t[1])}),!0)},get:function(e){if(!this.reset())return null;var t=this.data[e];return void 0===t?null:t},set:function(e,t){return this.reset(),void 0!==t?this.data[e]=t:delete this.data[e],this.burn()},burn:function(e){void 0!==e&&(this.data=e);var t={};for(let e in this.data)t[encodeURIComponent(e)]=encodeURIComponent(this.data[e]);var r=JSON.stringify(t).replace(/\:/g,"=").replace(/\,/g,"&").replace(/\"/g,"").slice(1,-1);return history.pushState("","","?"+r),!0},obj:function(){return this.reset()?this.data:null}};urlState.reset();var rootCSS={text:{},val:{},value:{},reset:function(){for(let e=0;e<document.styleSheets.length;e++)try{for(let t=0;t<document.styleSheets[e].cssRules.length;t++)if(":root"==document.styleSheets[e].cssRules[t].selectorText)for(let r=0;r<document.styleSheets[e].cssRules[t].style.length;r++){let n=document.styleSheets[e].cssRules[t].style[r],o=document.styleSheets[e].cssRules[t].style.getPropertyValue(n).trim(),i=n.hyphenToCamelCase(),s=i[0].toLowerCase()+i.slice(1);this.text[s]=this.text[i]=this.text[n]=o,o=Number(o.replaces("px,rem,em,vw,vh,vmin,vmax,%,in,cm,mm,pt,pc,ex,ch,ms,s","",void 0,!0)),this.val[s]=this.val[i]=this.val[n]=o}}catch(e){continue}this.value=this.val}};function Import(e,t=""){var r=document.createElement("script");r.src=e,r.type=t,document.body.appendChild(r)}rootCSS.reset(),money.create("bill"),money.refreshMoney();