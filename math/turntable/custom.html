<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>自定义模式</title>
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<script src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/popper.js/1.16.1/umd/popper.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://bootswatch.com/_vendor/bootstrap/dist/css/bootstrap.min.css">
	<link id="css" data-theme="bootstrap" rel="stylesheet" href="https://bootswatch.com/_vendor/bootstrap/dist/css/bootstrap.min.css" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
	<style>
		body,.input-group,label,.input-group,.form-control,.card,.card-body,h1,h2,h3,h4,h5,h6 { transition: all 250ms ease-in-out !important; }

		h4 {
			margin: 0.75em 0 0.5em;
		}

		textarea.form-control {
			min-height: 76px;
			transition: box-shadow 250ms ease, background-color 250ms ease, color 250ms ease !important;
			vertical-align: middle;
			word-wrap: normal;
			white-space: nowrap;
			overflow-x: auto;
			overflow-y: hidden;
			resize: none;
		}

		#line-number {
			align-items: flex-start;
			text-align: right;
			padding-right: 6px;
			user-select: none;
			overflow: hidden;
		}

		#data-coe:focus {
			border-color: #adb5bd;
			/* box-shadow: inset 0 0 0 0.2rem rgba(173, 181, 189, 0.5); */
			box-shadow: none;
		}

		.input-group.focus {
			box-shadow: 0 0 0 0.2rem rgb(0 123 255 / 25%);
			/* border: 1px solid; */
			border-color: #80bdff;
			border-radius: .25rem;
		}
	</style>
</head>

<body>
	<div class="container-fluid">
		<h4 class="mb-3">自定义模式</h4>
		<form action="test.html">
			<div class="custom-control custom-checkbox mb-3">
				<input type="checkbox" class="custom-control-input" name="notAllowCheat" id="notAllowCheat">
				<label class="custom-control-label" for="notAllowCheat">不允许作弊</label>
			</div>
			<div class="form-group">
				<label for="data-coe">奖项列表</label>
				<div class="input-group mb-3" id="data-group">
					<div class="input-group-prepend">
						<label class="input-group-text input-group-addon" id="line-number" for="data-coe">1</span>
					</div>
					<textarea class="form-control" name="list" id="data-coe"></textarea>
				</div>
			</div>
			<button type="submit" class="btn btn-primary btn-block">生成</button>
		</form>
	</div>
	<script>
		var NightTime = {
			nightDo: () => {
				NightTime.appendStyle({
					".input-group.focus": {
						"box-shadow": "0 0 0 0.2rem rgba(173, 181, 189, 0.5)",
						"border-color": "#adb5bd"
					}
				}, "focus");
			},
			lightDo: () => {
				NightTime.removeStyle("focus");
			}
		}
		$("#data-coe").on('input propertychange change', reLineNumber);
		function reLineNumber() {
			var rows = $("#data-coe").val().split('\n').length;
			var el = $("#data-group"), curHeight = el.height(),
				eln = $("#line-number"), curWidth = eln.width();
			$("#line-number").html(createSeq(rows));
			var autoHeight = el.css('height', 'auto').height(),
				autoWidth = eln.css('width', 'auto').width();
			el.height(curHeight).animate({ height: autoHeight }, 100);
			eln.width(curWidth).animate({ width: autoWidth + 20 }, 100);
		}
		function createSeq(last) {
			var list = "";
			for (var i = 1; i <= last; i++)
				list += i + "<br>"
			return list;
		}
		$("#data-coe").focus(function() {$(this).parent().addClass("focus")});
		$("#data-coe").blur(function() {$(this).parent().removeClass("focus")});
	</script>
	<script src="/basis/NightTime.js"></script>
</body>

</html>