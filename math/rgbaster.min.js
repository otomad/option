"use strict";var RGBaster={};!function(){var t=function(t,n){var e=document.createElement("canvas");return e.setAttribute("width",t),e.setAttribute("height",n),e.getContext("2d")},n=function(n,e){var r=!0;if("CANVAS"!=n.tagName){r=!1;var a=new Image,i=n.src||n;"data:"!==i.substring(0,5)&&(a.crossOrigin="Anonymous"),a.onload=function(){var n=t(a.width,a.height);n.drawImage(a,0,0);var r=n.getImageData(0,0,a.width,a.height);e&&e(r.data)}}else{var o,u=n.getContext("2d").getImageData(0,0,n.width,n.height);e&&e(u.data)}a.src=i},e=function(t){return["rgb(",t,")"].join("")},r=function(t){var n=[];for(var e in t)n.push(i(e,t[e]));return n.sort((function(t,n){return n.count-t.count})),n},a=function(t,n){if(t.length>n)return t.slice(0,n);for(var e=t.length-1;e<n-1;e++)t.push(i("0,0,0",0));return t},i=function(t,n){return{name:e(t),count:n}},o=10;RGBaster.colors=function(t,i){var o=(i=i||{}).exclude||[],u=i.paletteSize||10;n(t,(function(t){for(var n={},c="",s=[],f={name:"",count:0},g=[],d=0;d<t.length;d+=4)s[0]=t[d],s[1]=t[d+1],s[2]=t[d+2],c=s.join(","),-1===s.indexOf(void 0)&&0!==t[d+3]&&-1===o.indexOf(e(c))&&(n[c]=c in n?n[c]+1:1);if(i.success){var h=a(r(n),u+1);i.success({dominant:h[0].name,secondary:h[1].name,palette:h.map((function(t){return t.name})).slice(1)})}}))}}();